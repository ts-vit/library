# Детальная выжимка по главам: Промт-инжиниринг для LLM (Берриман, Циглер)

Техническое руководство по превращению LLM в надежные программные компоненты. Фокус на архитектуре запросов и управлении поведением моделей.

---

### Глава 1. Как работают LLM: Токены и Предсказания
*   **Токенизация:** Модели не видят слова, они видят числовые идентификаторы фрагментов текста. Почему ИИ плохо считает буквы и путается в математике.
*   **Вероятности:** Любой ответ — это статистически наиболее вероятное продолжение текста.
*   **Температура и Топ-p:** Параметры, управляющие случайностью выбора следующего токена.

### Глава 2. От текста к чату (API и Форматы)
*   **ChatML:** Появление ролей (System, User, Assistant) и то, как они влияют на управляемость модели.
*   **System Prompt:** "Конституция" вашего приложения. Как задать тон, личность и границы поведения (как наш `SOUL.md`).

### Глава 3. Принципы написания надежных промтов
*   **Ясность и контекст:** Почему ИИ нужны четкие инструкции, а не намеки.
*   **Разделители:** Использование XML-тегов, JSON или Markdown для структурирования данных внутри промпта.
*   **Few-shot Learning:** Обучение на примерах "на лету" без дообучения модели.

### Глава 4. Проектирование циклов и цепочек
*   **Цепочки рассуждений (CoT):** Как добавление фразы "Давай подумаем пошагово" радикально повышает точность в логических задачах.
*   **Декомпозиция:** Разбиение сложной задачи пользователя на последовательность простых вызовов LLM.
*   **Валидация:** Проверка того, соответствует ли ответ модели заданному формату (например, валидный ли это JSON).

### Глава 5. RAG и внешние знания
*   **Ограничение контекста:** Почему нельзя скормить модели всю Википедию разом.
*   **Retrieval:** Поиск наиболее релевантных кусков текста и их подмешивание в промпт.
*   **Актуальность:** RAG как способ давать модели доступ к новостям и приватным данным компании.

### Глава 6. Агенты и вызов инструментов (Function Calling)
*   **Инструменты:** Как научить модель говорить: "Мне нужно вызвать функцию `get_weather(city='Perm')`".
*   **ReAct:** Фреймворк, объединяющий рассуждение и действие в один цикл.
*   **Автономия:** Риски и возможности предоставления ИИ доступа к выполнению кода и API.

### Глава 7. Тестирование и итерации
*   **Регрессионное тестирование:** Как убедиться, что новый промпт не сломал то, что работало раньше.
*   **A/B тестирование промтов:** Сравнение разных формулировок на реальных данных.

---
**Связь с проектом Toshik:** Главы про System Prompt и Роли — это база нашего взаимодействия. Глава про валидацию JSON — критически важна для стабильной работы `toshik-babe`.
